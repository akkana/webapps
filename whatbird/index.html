<html>
<head>
<meta http-equiv="content-type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1">

<title>What bird is it?</title>

<style type="text/css">
  body { background: white; }
  #feedback { background: #f5f5ff;
              border: 2px inset #eee; margin: 1em; padding: .5em; }
  img { max-width: 100%; height: auto; }
  #newquiz { margin-left: 2.5em; }
  #media_area { position: relative; }
  #attribution { position: absolute; top: 1em; right: 1em; background: white; }
  #audiodiv { visibility: collapse; position: absolute; top: 0; left: 0; }
  #xenodiv { visibility: collapse; position: absolute; top: 0; left: 0; }
  #xenocover { z-index: 100; position: absolute; bottom: 0; height: 55px; width: 350px; background: white; }
  #birdpic { visibility: collapse; position: absolute; top: 0; left: 0; }
</style>

<link rel="stylesheet" href="awesomplete.css" />
<script src="awesomplete.js" async></script>

<!-- birdmedia will define allbirds, pics, and sounds -->
<script language="javascript" src="birdmedia.js"></script>

<!-- The code that runs the quiz -->
<script language="javascript" src="whatbird.js"></script>

<script language="javascript">
// Initial page load: just show a new quiz.
// This can't be in whatbird.js because that file doesn't see awesomplete.js.
function load() {
  // Initialize the autocomplete list with the full list of birds.
  var ansinput = document.getElementById("answer");
  var birdpletelist = document.getElementById("birdpletelist");
  birdpletelist.minChars = 4;
  //completes = new Array();
  for (var key in allbirds) {
    var option = document.createElement("option");
    option.text = allbirds[key].name + " (" + key + ")";
    option.value = key;
    birdpletelist.appendChild(option);
    //completes.push(allbirds[key].name + " (" + key + ")");
  }
  // Now that the options are all set up, it's save to start awesomeplete:
  //new Awesomplete(ansinput, {minChars: 3});
  new Awesomplete(ansinput, {list: birdpletelist, minChars: 3});

  ansinput.addEventListener("awesomplete-selectcomplete", selectcomplete);

  newquiz();
}

function selectcomplete(e) {
  answer();
  //alert("Selected: " + e.text);
}
</script>
</head>

<body onload="load();">

<img src="WhatBird.jpg" width=960 height=100 alt="What Bird?">

<p>
Bird quiz: based on a picture or sound, try to identify
what bird you're seeing or hearing.
Type in the name or 4-letter code of the bird you've identified.
If a photo shows more than one bird, name the rarer one.
<p>
<b id="scorecard"></b>

<noscript>
<b>You'll need to enable Javascript to use the quiz.</b>
</noscript>

<p>
Bird name or code:
<input id="answer" autofocus="autofocus">
<datalist id="birdpletelist"></datalist>

<!--  onKeyUp="return answerIfEnter(event);"> -->
<input type="submit" value="Submit" onclick="return answer();">
<input type="submit" id="newquiz" value="Another bird"
 onclick="return newquiz();">
<input id="chooseImages" type="checkbox"checked="checked" >Images
<input id="chooseSounds" type="checkbox"checked="checked" >Calls/Songs

<div id="feedback">
&nbsp;
</div>

<div id="media_area">

  <div id="audiodiv">
    <p>
    Play the bird's song or call:
    <audio id="audioplayer" controls>
      <source id="audiosource" src="">
      Your browser does not support the audio element.
    </audio>
  </div>

  <div id="xenodiv">
    <iframe id="xeno-canto" src='" scrolling='no' frameborder='0'
            width='340' height='220'>
    </iframe>
    <div id="xenocover">
      Sound from Xeno-Canto.org.
    </div>
  </div>

  <img id="birdpic" src="blank.png" alt="bird image will go here">

<div id="attribution">
  Place attribution here.
</div>
</div>

</body>
</html>
